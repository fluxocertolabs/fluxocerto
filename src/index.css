@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Brand palette */
  --color-brand-snow: #f8fafd; /* light background + symbol on dark */
  --color-brand-blue: #40b5e8; /* logo text */
  --color-brand-ink: #26284b; /* dark background + symbol on light */
  --color-brand-blue-ui: #0369a1; /* UI primary (buttons/links) - higher contrast than logo blue */

  /* Semantic tokens (light mode) */
  --color-background: var(--color-brand-snow);
  --color-foreground: var(--color-brand-ink);
  --color-card: #ffffff;
  --color-card-foreground: var(--color-brand-ink);
  --color-popover: #ffffff;
  --color-popover-foreground: var(--color-brand-ink);
  --color-primary: var(--color-brand-blue-ui);
  --color-primary-foreground: var(--color-brand-snow);
  --color-secondary: #e6f5fc;
  --color-secondary-foreground: var(--color-brand-ink);
  --color-muted: #edf3fb;
  --color-muted-foreground: #5c607f;
  --color-accent: #e6f5fc;
  --color-accent-foreground: var(--color-brand-ink);
  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: var(--color-brand-snow);
  --color-border: #d7e3f0;
  --color-input: #d7e3f0;
  --color-ring: var(--color-brand-blue);
  --radius: 0.5rem;
  /* Animation/glow helpers (rgb channels) */
  --fc-glow-emerald-rgb: 16 185 129;
  --fc-glow-amber-rgb: 245 158 11;
  --fc-glow-red-rgb: 239 68 68;
  /* Chart colors for light mode */
  --color-chart-1: var(--color-brand-blue);
  --color-chart-2: hsl(160 60% 45%);
  --color-chart-3: hsl(30 80% 55%);
  --color-chart-4: hsl(280 65% 60%);
  --color-chart-5: hsl(340 75% 55%);
}

/* Dark mode overrides - neutral near-black background + brand accents */
.dark {
  /* Semantic tokens (dark mode) */
  --color-background: #0d1117;
  --color-foreground: var(--color-brand-snow);
  --color-card: #161b22;
  --color-card-foreground: var(--color-brand-snow);
  --color-popover: #161b22;
  --color-popover-foreground: var(--color-brand-snow);
  --color-primary: var(--color-brand-blue-ui);
  --color-primary-foreground: var(--color-brand-snow);
  --color-secondary: #21262d;
  --color-secondary-foreground: var(--color-brand-snow);
  --color-muted: #21262d;
  --color-muted-foreground: #9aa3b2;
  --color-accent: #21262d;
  --color-accent-foreground: var(--color-brand-snow);
  --color-destructive: hsl(0 72% 51%);
  --color-destructive-foreground: var(--color-brand-snow);
  --color-border: #30363d;
  --color-input: #30363d;
  --color-ring: var(--color-brand-blue);
  /* Same hues, but allow tweaking per theme in one place if needed */
  --fc-glow-emerald-rgb: 16 185 129;
  --fc-glow-amber-rgb: 245 158 11;
  --fc-glow-red-rgb: 239 68 68;
  /* Chart colors for dark mode - more vibrant for visibility */
  --color-chart-1: var(--color-brand-blue);
  --color-chart-2: hsl(160 60% 55%);
  --color-chart-3: hsl(30 80% 60%);
  --color-chart-4: hsl(280 65% 65%);
  --color-chart-5: hsl(340 75% 60%);
}

/* Smooth transitions for theme changes (200ms per spec) */
* {
  transition: background-color 200ms ease-in-out,
              border-color 200ms ease-in-out;
}

/* Disable transitions during initial load to prevent FOUC animation */
.no-transitions,
.no-transitions * {
  transition: none !important;
}

* {
  border-color: var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
}

/* -------------------------------------------------------------------------- */
/* Micro-interactions                                                          */
/* -------------------------------------------------------------------------- */

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 180ms ease-in-out;
}

/* Floating help button animations */
@keyframes help-pulse {
  0%, 100% {
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }
  50% {
    box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.15), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  }
}

@keyframes help-ring {
  0% {
    transform: scale(1);
    opacity: 0.6;
  }
  100% {
    transform: scale(1.8);
    opacity: 0;
  }
}

.animate-help-pulse {
  animation: help-pulse 3s ease-in-out infinite;
}

.animate-help-ring {
  animation: help-ring 2s ease-out infinite;
}

.animate-help-ring-delayed {
  animation: help-ring 2s ease-out infinite;
  animation-delay: 0.5s;
}

/* Floating help button swap animations (FAB <-> menu) */
@keyframes help-fab-out {
  0% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
  35% {
    opacity: 1;
  }
  100% {
    transform: translate3d(7rem, 0, 0) scale(0.6) rotate(14deg);
    opacity: 0;
  }
}

@keyframes help-fab-in {
  0% {
    transform: translate3d(7rem, 0, 0) scale(0.6) rotate(14deg);
    opacity: 0;
  }
  70% {
    opacity: 1;
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes help-menu-in {
  0% {
    transform: translate3d(2rem, 0.25rem, 0) scale(0.96);
    opacity: 0;
  }
  60% {
    opacity: 1;
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 1;
  }
}

@keyframes help-menu-out {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate3d(1.5rem, 0.25rem, 0) scale(0.96);
    opacity: 0;
  }
}

@keyframes help-pill-in {
  from {
    transform: translate3d(1.5rem, 0, 0);
    opacity: 0;
  }
  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}

@keyframes help-pill-out {
  from {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
  to {
    transform: translate3d(1.5rem, 0, 0);
    opacity: 0;
  }
}

@keyframes help-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes help-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

.animate-help-fab-out {
  animation: help-fab-out 420ms cubic-bezier(0.18, 1, 0.32, 1) both;
}

.animate-help-fab-in {
  animation: help-fab-in 340ms cubic-bezier(0.18, 1, 0.32, 1) both;
  animation-delay: 80ms;
}

.animate-help-menu-in {
  animation: help-menu-in 460ms cubic-bezier(0.34, 1.56, 0.64, 1) both;
  animation-delay: 0ms;
}

.animate-help-menu-out {
  animation: help-menu-out 220ms cubic-bezier(0.4, 0, 0.2, 1) both;
}

.animate-help-pill-in {
  animation: help-pill-in 240ms ease-out both;
  animation-delay: 140ms;
}

.animate-help-pill-out {
  animation: help-pill-out 200ms ease-in both;
}

@media (prefers-reduced-motion: reduce) {
  .animate-shake,
  .animate-help-pulse,
  .animate-help-ring,
  .animate-help-ring-delayed {
    animation: none;
  }

  /* Keep the swap readable with a minimal fade (no travel/blur) */
  .animate-help-fab-out,
  .animate-help-menu-out,
  .animate-help-pill-out {
    animation: help-fade-out 120ms ease-out both;
    animation-delay: 0ms;
  }

  .animate-help-fab-in,
  .animate-help-menu-in,
  .animate-help-pill-in {
    animation: help-fade-in 120ms ease-out both;
    animation-delay: 0ms;
  }
}

/* -------------------------------------------------------------------------- */
/* Select (Radix) open/close animations                                        */
/* -------------------------------------------------------------------------- */

@keyframes fc-select-open {
  from {
    opacity: 0;
    transform: translateY(-8px) scaleY(0.85);
  }
  to {
    opacity: 1;
    transform: translateY(0) scaleY(1);
  }
}

@keyframes fc-select-close {
  from {
    opacity: 1;
    transform: translateY(0) scaleY(1);
  }
  to {
    opacity: 0;
    transform: translateY(-6px) scaleY(0.92);
  }
}

@media (prefers-reduced-motion: reduce) {
  /* Re-define keyframes to avoid transforms for motion-sensitive users. */
  @keyframes fc-select-open {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes fc-select-close {
    from { opacity: 1; }
    to { opacity: 0; }
  }
}

/* -------------------------------------------------------------------------- */
/* Banner glow (warning states)                                                */
/* -------------------------------------------------------------------------- */

@keyframes fcGlowAmber {
  0%, 100% {
    box-shadow:
      0 0 0 0 rgb(var(--fc-glow-amber-rgb) / 0),
      0 0 0 0 rgb(var(--fc-glow-amber-rgb) / 0);
  }
  50% {
    box-shadow:
      0 0 0 1px rgb(var(--fc-glow-amber-rgb) / 0.22),
      0 0 24px rgb(var(--fc-glow-amber-rgb) / 0.18);
  }
}

@keyframes fcGlowRed {
  0%, 100% {
    box-shadow:
      0 0 0 0 rgb(var(--fc-glow-red-rgb) / 0),
      0 0 0 0 rgb(var(--fc-glow-red-rgb) / 0);
  }
  50% {
    box-shadow:
      0 0 0 1px rgb(var(--fc-glow-red-rgb) / 0.20),
      0 0 28px rgb(var(--fc-glow-red-rgb) / 0.18);
  }
}

.fc-glow-amber {
  animation: fcGlowAmber 2.8s ease-in-out infinite;
}

.fc-glow-red {
  animation: fcGlowRed 2.8s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .fc-glow-amber,
  .fc-glow-red {
    animation: none;
  }
}

/* -------------------------------------------------------------------------- */
/* Toast animations                                                            */
/* -------------------------------------------------------------------------- */

@keyframes fcToastIn {
  from {
    transform: translate3d(calc(100vw + 48px), 0px, 0);
  }
  to {
    transform: translate3d(0px, 0px, 0);
  }
}

@keyframes fcToastOut {
  from {
    transform: translate3d(0px, 0px, 0);
  }
  to {
    transform: translate3d(calc(100vw + 48px), 0px, 0);
  }
}

.fc-toast-enter {
  animation: fcToastIn 460ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

.fc-toast-exit {
  animation: fcToastOut 340ms cubic-bezier(0.4, 0, 0.2, 1) both;
  pointer-events: none;
}

@media (prefers-reduced-motion: reduce) {
  @keyframes fcToastIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes fcToastOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }
}

/* -------------------------------------------------------------------------- */
/* Quick Update freshness bar glow                                             */
/* -------------------------------------------------------------------------- */

@keyframes fcEdgeGlowPulse {
  0%, 100% { opacity: 0.28; }
  50% { opacity: 0.62; }
}

.fc-edge-glow-emerald {
  background: radial-gradient(70% 120% at 100% 50%, rgb(var(--fc-glow-emerald-rgb) / 0.85), rgb(var(--fc-glow-emerald-rgb) / 0) 72%);
  filter: blur(6px);
  mix-blend-mode: screen;
  animation: fcEdgeGlowPulse 2.8s ease-in-out infinite;
}

.fc-edge-glow-amber {
  background: radial-gradient(70% 120% at 100% 50%, rgb(var(--fc-glow-amber-rgb) / 0.82), rgb(var(--fc-glow-amber-rgb) / 0) 72%);
  filter: blur(6px);
  mix-blend-mode: screen;
  animation: fcEdgeGlowPulse 2.8s ease-in-out infinite;
}

.fc-edge-glow-red {
  background: radial-gradient(70% 120% at 100% 50%, rgb(var(--fc-glow-red-rgb) / 0.78), rgb(var(--fc-glow-red-rgb) / 0) 72%);
  filter: blur(6px);
  mix-blend-mode: screen;
  animation: fcEdgeGlowPulse 2.8s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .fc-edge-glow-emerald,
  .fc-edge-glow-amber,
  .fc-edge-glow-red {
    animation: none;
  }
}
