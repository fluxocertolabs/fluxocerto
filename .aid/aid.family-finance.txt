<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
</file>

<file path="specs/003-cashflow-engine/contracts/cashflow-engine.ts">
import 'zod'

export interface CashflowEngineOptions {
    property startDate: Date
    property projectionDays: number
}

export interface CashflowEngineInput {
    property accounts: import('../../../src/types').BankAccount
}

export interface ScenarioSummary {
    property totalIncome: number
    property totalExpenses: number
    property endBalance: number
    property dangerDays: DangerDay[]
    property dangerDayCount: number
}

export interface CashflowProjection {
    property startDate: Date
    property endDate: Date
    property startingBalance: number
    property days: DailySnapshot[]
    property optimistic: ScenarioSummary
    property pessimistic: ScenarioSummary
}
export const CashflowEngineOptionsSchema
export const CashflowEngineInputSchema
type CalculateCashflow = (input: CashflowEngineInput) => CashflowProjection

export class CashflowCalculationError extends Error {
    public code: CashflowErrorCode
    public details: unknown
    public constructor(message: string, code: CashflowErrorCode, details: unknown)
}
</file>

<file path="specs/006-monthly-ritual/contracts/component-props.ts">
import '../../../src/types'

export interface QuickUpdateViewProps {
    property onDone: () => void
    property onCancel: () => void
}
type BalanceItem = | {
      type: 'account'
      entity: BankAccount
    }
  | {
      type: 'card'
      entity: CreditCard
    }

export interface BalanceListProps {
    property items: BalanceItem[]
    property onBalanceUpdate: (
    item: BalanceItem,
    newBalance: number
  ) => Promise<{ success: boolean; error?: string }>
}

export interface BalanceListItemProps {
    property item: BalanceItem
    property previousBalance: number
    property onBlur: (newBalance: number) => Promise<{ success: boolean; error?: string }>
    property isSaving: boolean
    property error: string | null
    property onRetry: () => void
}

export interface QuickUpdateEmptyStateProps {
    property onNavigateToManage: () => void
}

export interface HealthIndicatorProps {
    property status: 'good' | 'warning' | 'danger'
    property message: string
    property isStale: boolean
    property staleCount: number
    property onStaleClick: () => void
}

export interface ProjectionSelectorProps {
    property value: 7 | 14 | 30 | 60 | 90
    property onChange: (days: 7 | 14 | 30 | 60 | 90) => void
    property disabled: boolean
}

export interface SurplusDeficitProps {
    property optimistic: number
    property pessimistic: number
}

export interface BalanceFieldState {
    property displayValue: string
    property valueInCents: number
    property isEditing: boolean
    property isSaving: boolean
    property error: string | null
}
</file>

<file path="specs/006-monthly-ritual/contracts/store-actions.ts">
import '../../../src/stores/finance-store'

export interface FinanceStoreExtensions {
    property updateAccountBalance: (id: string, balance: number) => Promise<Result<void>>
    property updateCreditCardBalance: (
    id: string,
    statementBalance: number
  ) => Promise<Result<void>>
}
type ProjectionDays = 7 | 14 | 30 | 60 | 90

export interface PreferencesStore {
    property projectionDays: ProjectionDays
    property setProjectionDays: (days: ProjectionDays) => void
}

export interface UseBalanceUpdateResult {
    property updateAccountBalance: (id: string, balance: number) => Promise<Result<void>>
    property updateCreditCardBalance: (
    id: string,
    statementBalance: number
  ) => Promise<Result<void>>
    property isSaving: boolean
}

export interface UseHealthIndicatorResult {
    property status: 'good' | 'warning' | 'danger'
    property message: string
    property isStale: boolean
    property staleEntities: Array<{
    id: string
    name: string
    type: 'account' | 'card'
  }>
    property dangerDays: {
    optimistic: number
    pessimistic: number
  }
}

export interface UseCashflowProjectionOptions {
    property projectionDays: ProjectionDays
}
</file>

<file path="src/App.tsx">
import 'react-router-dom'
import '@/lib/utils'
import '@/lib/supabase'
import '@/hooks/use-auth'
import '@/components/layout/header'
import '@/components/setup-required'
import '@/pages/dashboard'
import '@/pages/manage'
import '@/pages/login'
import '@/pages/auth-callback'
</file>

<file path="src/components/auth/login-form.tsx">
import 'react'
import '@/components/ui/button'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/lib/supabase'
import '@/lib/auth-errors'
export function LoginForm()
</file>

<file path="src/components/cashflow/cashflow-chart.tsx">
import 'react'
import 'recharts'
import '@/lib/utils'
import '@/lib/format'
import './types'
import './types'
import './chart-tooltip'
import './chart-legend'
import '@/stores/theme-store'
export function CashflowChart()
</file>

<file path="src/components/cashflow/chart-legend.tsx">
import '@/lib/utils'
import './types'
export function ChartLegend()
</file>

<file path="src/components/cashflow/chart-tooltip.tsx">
import '@/lib/utils'
import '@/lib/format'
import './types'
export function ChartTooltip()
</file>

<file path="src/components/cashflow/empty-state.tsx">
import 'react-router-dom'
import '@/components/ui/button'
import '@/lib/utils'
export function EmptyState()
</file>

<file path="src/components/cashflow/error-state.tsx">
import '@/lib/utils'
export function ErrorState()
</file>

<file path="src/components/cashflow/health-indicator.tsx">
import '@/lib/utils'
import '@/hooks/use-health-indicator'
export function HealthIndicator()
</file>

<file path="src/components/cashflow/loading-skeleton.tsx">
import '@/lib/utils'
export function LoadingSkeleton()
</file>

<file path="src/components/cashflow/projection-selector.tsx">
import '@/components/ui/select'
import '@/types'
export function ProjectionSelector()
</file>

<file path="src/components/cashflow/summary-panel.tsx">
import '@/lib/utils'
import '@/lib/format'
import './surplus-deficit'
import './types'
export function SummaryPanel()
</file>

<file path="src/components/cashflow/surplus-deficit.tsx">
import '@/lib/utils'
import '@/lib/format'
export function SurplusDeficit()
</file>

<file path="src/components/cashflow/types.ts">
import '@/lib/cashflow/types'

export interface ChartDataPoint {
    property date: string
    property timestamp: number
    property optimisticBalance: number
    property pessimisticBalance: number
    property investmentInclusiveBalance: number
    property isOptimisticDanger: boolean
    property isPessimisticDanger: boolean
    property snapshot: DailySnapshot
}

export interface LineVisibility {
    property optimistic: boolean
    property pessimistic: boolean
    property investmentInclusive: boolean
    property dangerZone: boolean
}
export const DEFAULT_LINE_VISIBILITY

export interface LegendItem {
    property key: keyof LineVisibility
    property label: string
    property color: string
}

export interface DangerRange {
    property start: string
    property end: string
    property scenario: 'optimistic' | 'pessimistic' | 'both'
}

export interface SummaryStats {
    property startingBalance: number
    property optimistic: {
    totalIncome: number
    totalExpenses: number
    endBalance: number
    dangerDayCount: number
    /** Surplus (positive) or deficit (negative): endBalance - startingBalance */
    surplus: number
  }
    property pessimistic: {
    totalIncome: number
    totalExpenses: number
    endBalance: number
    dangerDayCount: number
    /** Surplus (positive) or deficit (negative): endBalance - startingBalance */
    surplus: number
  }
}
</file>

<file path="src/components/layout/header.tsx">
import 'react-router-dom'
import '@/lib/utils'
import '@/components/ui/button'
import '@/components/theme'
import '@/lib/supabase'
import '@/hooks/use-auth'
export function Header()
</file>

<file path="src/components/loading/dashboard-skeleton.tsx">
import '@/lib/utils'
import './skeleton-primitives'
import '@/types/loading'
export function DashboardSkeleton()
</file>

<file path="src/components/loading/manage-skeleton.tsx">
import '@/lib/utils'
import './skeleton-primitives'
import '@/types/loading'
export function ManageSkeleton()
</file>

<file path="src/components/loading/modal-skeleton.tsx">
import '@/lib/utils'
import './skeleton-primitives'
import '@/types/loading'
export function ModalSkeleton()
</file>

<file path="src/components/loading/page-loading-wrapper.tsx">
import '@/lib/utils'
import '@/components/cashflow/error-state'
import '@/types/loading'
import '@/types/loading'
export function PageLoadingWrapper()
</file>

<file path="src/components/loading/skeleton-primitives.tsx">
import '@/lib/utils'
import '@/types/loading'
export function SkeletonBase()
export function SkeletonCard()
export function SkeletonLine()
export function SkeletonSummaryCard()
export function SkeletonChart()
export function SkeletonListItem()
export function SkeletonTabs()
export function SkeletonBalanceItem()
</file>

<file path="src/components/manage/accounts/account-card.tsx">
import 'react'
import 'lucide-react'
import '@/components/ui/button'
import '@/components/manage/shared/inline-edit-input'
import '@/components/manage/shared/format-utils'
import '@/lib/utils'
import '@/types'
export function AccountCard()
</file>

<file path="src/components/manage/accounts/account-form.tsx">
import 'react'
import '@/components/ui/button'
import '@/components/ui/currency-input'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/components/ui/select'
import '@/types'
export function AccountForm()
</file>

<file path="src/components/manage/accounts/account-list-item.tsx">
import '@/components/ui/button'
import '@/components/manage/shared/inline-edit-input'
import '@/components/ui/owner-badge'
import '@/lib/utils'
import '@/types'
export function AccountListItem()
</file>

<file path="src/components/manage/accounts/account-list.tsx">
import 'react'
import '@/types'
import '@/components/manage/shared/entity-empty-state'
import './account-card'
import '@/components/ui/select'
export function AccountList()
</file>

<file path="src/components/manage/credit-cards/credit-card-card.tsx">
import 'react'
import 'lucide-react'
import '@/components/ui/button'
import '@/components/manage/shared/inline-edit-input'
import '@/components/manage/shared/format-utils'
import '@/lib/utils'
import '@/types'
export function CreditCardCard()
</file>

<file path="src/components/manage/credit-cards/credit-card-form.tsx">
import 'react'
import '@/components/ui/button'
import '@/components/ui/currency-input'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/components/ui/select'
import '@/types'
export function CreditCardForm()
</file>

<file path="src/components/manage/credit-cards/credit-card-list-item.tsx">
import '@/components/ui/button'
import '@/components/manage/shared/inline-edit-input'
import '@/components/ui/owner-badge'
import '@/lib/utils'
import '@/types'
export function CreditCardListItem()
</file>

<file path="src/components/manage/credit-cards/credit-card-list.tsx">
import 'react'
import '@/types'
import '@/components/manage/shared/entity-empty-state'
import './credit-card-card'
import '@/components/ui/select'
export function CreditCardList()
</file>

<file path="src/components/manage/expenses/expense-form.tsx">
import 'react'
import '@/components/ui/button'
import '@/components/ui/currency-input'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/types'
export function ExpenseForm()
</file>

<file path="src/components/manage/expenses/expense-list-item.tsx">
import '@/components/ui/button'
import '@/components/ui/switch'
import '@/lib/utils'
import '@/types'
export function ExpenseListItem()
</file>

<file path="src/components/manage/expenses/expense-list.tsx">
import '@/types'
import '@/components/ui/button'
import '@/components/manage/shared/entity-empty-state'
import './expense-list-item'
export function ExpenseList()
</file>

<file path="src/components/manage/expenses/expense-section.tsx">
import '@/components/ui/tabs'
import './expense-list'
import './single-shot-expense-list'
import '@/types'
export function ExpenseSection()
</file>

<file path="src/components/manage/expenses/single-shot-expense-form.tsx">
import 'react'
import 'date-fns'
import '@/components/ui/button'
import '@/components/ui/currency-input'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/types'
export function SingleShotExpenseForm()
</file>

<file path="src/components/manage/expenses/single-shot-expense-list-item.tsx">
import 'date-fns'
import 'date-fns/locale'
import '@/components/ui/button'
import '@/lib/utils'
import '@/types'
export function SingleShotExpenseListItem()
</file>

<file path="src/components/manage/expenses/single-shot-expense-list.tsx">
import '@/types'
import '@/components/ui/button'
import '@/lib/utils'
import './single-shot-expense-list-item'
export function SingleShotExpenseList()
</file>

<file path="src/components/manage/projects/project-form.tsx">
import 'react'
import 'date-fns'
import '@/components/ui/button'
import '@/components/ui/currency-input'
import '@/components/ui/input'
import '@/components/ui/label'
import '@/components/ui/switch'
import '@/components/ui/select'
import '@/types'
export function ProjectForm()
</file>

<file path="src/components/manage/projects/project-list-item.tsx">
import '@/components/ui/button'
import '@/components/ui/switch'
import '@/lib/utils'
import '@/types'
export function ProjectListItem()
</file>

<file path="src/components/manage/projects/project-list.tsx">
import '@/types'
import '@/components/manage/shared/entity-empty-state'
import './project-list-item'
export function ProjectList()
</file>

<file path="src/components/manage/shared/delete-confirmation.tsx">
import '@/components/ui/alert-dialog'
export function DeleteConfirmation()
</file>

<file path="src/components/manage/shared/entity-empty-state.tsx">
import '@/components/ui/button'
import '@/lib/utils'
export function EntityEmptyState()
</file>

<file path="src/components/manage/shared/format-utils.ts">
export function formatCurrency(cents: number)
export function formatRelativeTime(date: Date | undefined)
export function isStale(date: Date | undefined)
</file>

<file path="src/components/manage/shared/inline-edit-input.tsx">
import 'react'
import '@/components/ui/input'
import '@/lib/utils'
export function InlineEditInput()
</file>

<file path="src/components/manage/shared/storage-error-toast.tsx">
import '@/components/ui/button'
import '@/components/ui/card'
import '@/lib/utils'
export function StorageErrorToast()
</file>

<file path="src/components/quick-update/balance-list-item.tsx">
import 'react'
import '@/components/ui/input'
import '@/components/ui/button'
import '@/lib/utils'
import '@/lib/format'
import './types'
import './types'
export function BalanceListItem()
</file>

<file path="src/components/quick-update/balance-list.tsx">
import 'react'
import '@/hooks/use-finance-data'
import '@/stores/finance-store'
import './balance-list-item'
import './types'
export function BalanceList()
</file>

<file path="src/components/quick-update/empty-state.tsx">
import 'react-router-dom'
import '@/components/ui/button'
export function QuickUpdateEmptyState()
</file>

<file path="src/components/quick-update/quick-update-view.tsx">
import 'react'
import '@/hooks/use-finance-data'
import '@/stores/finance-store'
import '@/hooks/use-coordinated-loading'
import '@/components/ui/button'
import '@/lib/utils'
import './balance-list'
import './empty-state'
import '@/components/loading/modal-skeleton'
import '@/components/cashflow/error-state'
import '@/types/loading'
export function QuickUpdateView()
</file>

<file path="src/components/quick-update/types.ts">
import '@/types'
type BalanceItem = | {
      type: 'account'
      entity: BankAccount
    }
  | {
      type: 'card'
      entity: CreditCard
    }

export interface BalanceFieldState {
    property displayValue: string
    property valueInCents: number
    property isEditing: boolean
    property isSaving: boolean
    property error: string | null
}
export function getBalanceFromItem(item: BalanceItem)
export function getNameFromItem(item: BalanceItem)
export function getIdFromItem(item: BalanceItem)
</file>

<file path="src/components/setup-required.tsx">
import '@/components/ui/card'
import '@/lib/supabase'
export function SetupRequired()
</file>

<file path="src/components/theme/theme-toggle.tsx">
import 'lucide-react'
import '@/components/ui/button'
import '@/hooks/use-theme'
import '@/types/theme'
export function ThemeToggle()
</file>

<file path="src/components/ui/alert-dialog.tsx">
import 'react'
import '@radix-ui/react-alert-dialog'
import '@/lib/utils'
import '@/components/ui/button'
</file>

<file path="src/components/ui/button.tsx">
import 'react'
import '@radix-ui/react-slot'
import 'class-variance-authority'
import '@/lib/utils'

export interface ButtonProps {
    property asChild: boolean
}
</file>

<file path="src/components/ui/card.tsx">
import 'react'
import '@/lib/utils'
</file>

<file path="src/components/ui/currency-input.tsx">
import 'react'
import '@/components/ui/input'
import '@/lib/utils'
export const CurrencyInput
</file>

<file path="src/components/ui/dialog.tsx">
import 'react'
import '@radix-ui/react-dialog'
import '@/lib/utils'
import '@radix-ui/react-icons'
</file>

<file path="src/components/ui/input.tsx">
import 'react'
import '@/lib/utils'
</file>

<file path="src/components/ui/label.tsx">
import 'react'
import '@radix-ui/react-label'
import 'class-variance-authority'
import '@/lib/utils'
</file>

<file path="src/components/ui/owner-badge.tsx">
import '@/lib/utils'
export function OwnerBadge()
</file>

<file path="src/components/ui/select.tsx">
import 'react'
import '@radix-ui/react-select'
import '@/lib/utils'
import '@radix-ui/react-icons'
</file>

<file path="src/components/ui/switch.tsx">
import 'react'
import '@radix-ui/react-switch'
import '@/lib/utils'
</file>

<file path="src/components/ui/tabs.tsx">
import 'react'
import '@radix-ui/react-tabs'
import '@/lib/utils'
</file>

<file path="src/hooks/use-auth.ts">
import 'react'
import '@supabase/supabase-js'
import '@/lib/supabase'
import '@/types/auth'
export function useAuth()
</file>

<file path="src/hooks/use-cashflow-projection.test.ts">
import 'vitest'
import './use-cashflow-projection'
import '@/lib/cashflow/types'
</file>

<file path="src/hooks/use-cashflow-projection.ts">
import 'react'
import '@/hooks/use-finance-data'
import '@/lib/cashflow'
import '@/lib/format'
import '@/stores/preferences-store'
import '@/lib/cashflow/types'
import '@/components/cashflow/types'
import '@/types'
export function transformToChartData(days: DailySnapshot[], investmentTotal: number)
export function getDangerRanges(chartData: ChartDataPoint[])

export interface UseCashflowProjectionOptions {
    property projectionDays: ProjectionDays
}

export interface UseCashflowProjectionResult {
    property projection: CashflowProjection | null
    property chartData: ChartDataPoint[]
    property dangerRanges: DangerRange[]
    property summaryStats: SummaryStats | null
    property isLoading: boolean
    property hasData: boolean
    property error: Error | null
    property retry: () => void
    property projectionDays: ProjectionDays
}
export function useCashflowProjection(options: UseCashflowProjectionOptions)
</file>

<file path="src/hooks/use-coordinated-loading.ts">
import 'react'
import '@/types/loading'
import '@/types/loading'
export function useCoordinatedLoading(isLoading: boolean, error: string | null, onRetry: () => void, config: LoadingConfig)
</file>

<file path="src/hooks/use-finance-data.ts">
import 'react'
import '@/lib/supabase'
import '@/hooks/use-auth'
import '@/types'
import '@/types'
import '@supabase/supabase-js'

export interface UseFinanceDataReturn {
    property accounts: BankAccount[]
    property projects: Project[]
    property expenses: Expense[]
    property fixedExpenses: FixedExpense[]
    property singleShotExpenses: SingleShotExpense[]
    property creditCards: CreditCard[]
    property profiles: Profile[]
    property isLoading: boolean
    property error: string | null
    property retry: () => void
}
export function useFinanceData()
</file>

<file path="src/hooks/use-health-indicator.ts">
import 'react'
import '@/hooks/use-finance-data'
import '@/lib/staleness'
import '@/components/cashflow/types'
type HealthStatus = 'good' | 'warning' | 'danger'

export interface StaleEntity {
    property id: string
    property name: string
    property type: 'account' | 'card'
}

export interface UseHealthIndicatorResult {
    property status: HealthStatus
    property message: string
    property isStale: boolean
    property staleEntities: StaleEntity[]
    property dangerDays: {
    optimistic: number
    pessimistic: number
  }
    property isLoading: boolean
}
export function useHealthIndicator(summaryStats: SummaryStats | null)
</file>

<file path="src/hooks/use-theme.ts">
import 'react'
import '@/stores/theme-store'
import '@/lib/theme-service'
import '@/hooks/use-auth'
import '@/types/theme'
export function useTheme()
</file>

<file path="src/lib/auth-errors.ts">

export interface AuthErrorMapping {
}
export const AUTH_ERROR_MESSAGES
export function getAuthErrorMessage(error: Error | null)
export function isRateLimitError(error: Error | null)
export function isNetworkError(error: Error | null)
export function isExpiredLinkError(error: Error | null)
</file>

<file path="src/lib/cashflow/calculate.test.ts">
import 'vitest'
import './calculate'
import './validators'
</file>

<file path="src/lib/cashflow/calculate.ts">
import 'date-fns'
import '../../types'
import 'date-fns'
import './frequencies'
import 'date-fns'
import './types'
import './validators'
export function calculateStartingBalance(accounts: BankAccount[])
export function calculateCashflow(input: CashflowEngineInput)
</file>

<file path="src/lib/cashflow/frequencies.test.ts">
import 'vitest'
import './frequencies'
</file>

<file path="src/lib/cashflow/frequencies.ts">
import 'date-fns'
export function getEffectiveDay(paymentDay: number, date: Date)
export function isMonthlyPaymentDue(date: Date, paymentDay: number)
export function isBiweeklyPaymentDue(date: Date, dayOffset: number, paymentDay: number, sourceId: string, firstOccurrences: Map<string, number>)
export function isWeeklyPaymentDue(date: Date, dayOffset: number, paymentDay: number, sourceId: string, firstOccurrences: Map<string, number>)
export function isDayOfWeekPaymentDue(date: Date, dayOfWeek: number)
export function isTwiceMonthlyPaymentDue(date: Date, firstDay: number, secondDay: number)
</file>

<file path="src/lib/cashflow/types.ts">

export interface CashflowEngineOptions {
    property startDate: Date
    property projectionDays: number
}

export interface IncomeEvent {
    property projectId: string
    property projectName: string
    property amount: number
    property certainty: 'guaranteed' | 'probable' | 'uncertain'
}

export interface ExpenseEvent {
    property sourceId: string
    property sourceName: string
    property sourceType: 'expense' | 'credit_card'
    property amount: number
}

export interface DangerDay {
    property date: Date
    property dayOffset: number
    property balance: number
}

export interface DailySnapshot {
    property date: Date
    property dayOffset: number
    property optimisticBalance: number
    property pessimisticBalance: number
    property incomeEvents: IncomeEvent[]
    property expenseEvents: ExpenseEvent[]
    property isOptimisticDanger: boolean
    property isPessimisticDanger: boolean
}

export interface ScenarioSummary {
    property totalIncome: number
    property totalExpenses: number
    property endBalance: number
    property dangerDays: DangerDay[]
    property dangerDayCount: number
}

export interface CashflowProjection {
    property startDate: Date
    property endDate: Date
    property startingBalance: number
    property days: DailySnapshot[]
    property optimistic: ScenarioSummary
    property pessimistic: ScenarioSummary
}

export class CashflowCalculationError extends Error {
    public code: CashflowErrorCode
    public details: unknown
    public constructor(message: string, code: CashflowErrorCode, details: unknown)
}
</file>

<file path="src/lib/cashflow/validators.test.ts">
import 'vitest'
import './validators'
import './types'
</file>

<file path="src/lib/cashflow/validators.ts">
import 'zod'
import '../../types'
import './types'
export const CashflowEngineOptionsSchema
type ValidatedOptions = z.infer<typeof CashflowEngineOptionsSchema>
export const BankAccountEngineSchema
export const ProjectEngineSchema
export const FixedExpenseEngineSchema
export const CreditCardEngineSchema

export interface CashflowEngineInput {
    property accounts: BankAccount[]
    property projects: Project[]
    property expenses: FixedExpense[]
    property singleShotExpenses: SingleShotExpense[]
    property creditCards: CreditCard[]
    property projectionDays: number
    property options: z.infer<typeof CashflowEngineOptionsSchema>
}

export interface ValidatedInput {
    property accounts: BankAccount[]
    property activeProjects: Project[]
    property guaranteedProjects: Project[]
    property activeExpenses: FixedExpense[]
    property singleShotExpenses: SingleShotExpense[]
    property creditCards: CreditCard[]
    property options: ValidatedOptions
}
export function validateAndFilterInput(input: CashflowEngineInput)
</file>

<file path="src/lib/format.ts">
export function formatCurrency(cents: number)
export function formatChartCurrency(reais: number)
export function formatCurrencyWithCents(cents: number)
export function formatChartDate(date: Date)
export function formatTooltipDate(date: Date)
</file>

<file path="src/lib/staleness.ts">
export const STALE_THRESHOLD_DAYS
export function isStale(updatedAt: Date | undefined)
export function getDaysSinceUpdate(updatedAt: Date | undefined)
</file>

<file path="src/lib/supabase.ts">
import '@supabase/supabase-js'
import '@/stores/finance-store'

export interface ProfileRow {
    property id: string
    property name: string
    property email: string | null
    property created_at: string
    property created_by: string | null
}

export interface AccountRow extends AccountRowBase {
    property owner: { id: string; name: string } | null
}

export interface ProjectRow {
    property id: string
    property name: string
    property amount: number
    property frequency: 'weekly' | 'biweekly' | 'twice-monthly' | 'monthly'
    property payment_schedule: {
    type: 'dayOfWeek'
    dayOfWeek: number
  } | {
    type: 'dayOfMonth'
    dayOfMonth: number
  } | {
    type: 'twiceMonthly'
    firstDay: number
    secondDay: number
  }
    property certainty: 'guaranteed' | 'probable' | 'uncertain'
    property is_active: boolean
    property created_at: string
    property updated_at: string
}

export interface ExpenseRow {
    property id: string
    property name: string
    property amount: number
    property type: 'fixed' | 'single_shot'
    property due_day: number | null
    property date: string | null
    property is_active: boolean
    property created_at: string
    property updated_at: string
}

export interface CreditCardRow extends CreditCardRowBase {
    property owner: { id: string; name: string } | null
}
type Database = {
  public: {
    Tables: {
      accounts: { Row: AccountRow }
      projects: { Row: ProjectRow }
      expenses: { Row: ExpenseRow }
      credit_cards: { Row: CreditCardRow }
      profiles: { Row: ProfileRow }
    }
  }
}
export function getMissingEnvVars()
export function isSupabaseConfigured()
export function getSupabase()
export async function initializeAuth()
export async function getCurrentUserId()
export async function getCurrentUser()
export async function signInWithMagicLink(email: string)
export async function signOut()
export function isOnline()
export function handleSupabaseError<T>(error: unknown)
</file>

<file path="src/lib/theme-service.ts">
import '@/lib/supabase'
import '@/types/theme'
import '@/types/theme'
export async function getThemePreference()
export async function saveThemePreference(theme: ThemeValue)
export async function deleteThemePreference()
</file>

<file path="src/lib/theme.ts">
import '@/types/theme'
export function getSystemTheme()
export function resolveTheme(theme: ThemeValue)
export function applyThemeToDocument(resolvedTheme: ResolvedTheme)
export function getStoredTheme()
</file>

<file path="src/lib/utils.ts">
import 'clsx'
import 'tailwind-merge'
export function cn()
</file>

<file path="src/main.tsx">
import 'react'
import 'react-dom/client'
import './App'
import './lib/supabase'
import './index.css'
</file>

<file path="src/pages/auth-callback.tsx">
import 'react'
import 'react-router-dom'
import '@/lib/supabase'
import '@/lib/auth-errors'
import '@/components/ui/button'
import '@/components/ui/card'
export function AuthCallbackPage()
</file>

<file path="src/pages/dashboard.tsx">
import 'react'
import '@/hooks/use-cashflow-projection'
import '@/hooks/use-coordinated-loading'
import '@/hooks/use-health-indicator'
import '@/stores/preferences-store'
import '@/components/cashflow/cashflow-chart'
import '@/components/cashflow/summary-panel'
import '@/components/cashflow/health-indicator'
import '@/components/cashflow/projection-selector'
import '@/components/cashflow/empty-state'
import '@/components/loading'
import '@/components/quick-update'
import '@/components/ui/button'
import '@/lib/utils'
export function Dashboard()
</file>

<file path="src/pages/login.tsx">
import '@/components/ui/card'
import '@/components/auth/login-form'
export function LoginPage()
</file>

<file path="src/pages/manage.tsx">
import 'react'
import '@/components/ui/tabs'
import '@/components/ui/button'
import '@/components/ui/dialog'
import '@/hooks/use-finance-data'
import '@/hooks/use-coordinated-loading'
import '@/stores/finance-store'
import '@/components/manage/accounts/account-list'
import '@/components/manage/accounts/account-form'
import '@/components/manage/projects/project-list'
import '@/components/manage/projects/project-form'
import '@/components/manage/expenses/expense-form'
import '@/components/manage/expenses/expense-section'
import '@/components/manage/expenses/single-shot-expense-form'
import '@/components/manage/credit-cards/credit-card-list'
import '@/components/manage/credit-cards/credit-card-form'
import '@/components/manage/shared/delete-confirmation'
import '@/components/loading'
import '@/lib/utils'
import '@/types'
export function ManagePage()
</file>

<file path="src/stores/finance-store.ts">
import 'zustand'
import 'zod'
import '../lib/supabase'
import '../types'
type Result<T> = | { success: true; data: T }
  | { success: false; error: string; details?: unknown }
export const useFinanceStore
</file>

<file path="src/stores/preferences-store.ts">
import 'zustand'
import 'zustand/middleware'
import '@/types'
export const usePreferencesStore
</file>

<file path="src/stores/theme-store.ts">
import 'zustand'
import 'zustand/middleware'
import '@/types/theme'
export const useThemeStore
</file>

<file path="src/test/setup.ts">
import '@testing-library/jest-dom'
</file>

<file path="src/types/auth.ts">
import '@supabase/supabase-js'

export interface AuthState {
    property user: SupabaseUser | null
    property isLoading: boolean
    property isAuthenticated: boolean
}

export interface LoginFormData {
    property email: string
}

export interface AuthError {
    property code: string
    property message: string
}
</file>

<file path="src/types/index.test.ts">
import 'vitest'
import './index'
</file>

<file path="src/types/index.ts">
import 'zod'
export const ProfileSchema
type Profile = z.infer<typeof ProfileSchema>
export const BankAccountInputSchema
export const BankAccountSchema
type BankAccountInput = z.infer<typeof BankAccountInputSchema>
type BankAccount = z.infer<typeof BankAccountSchema>
export const DayOfWeekScheduleSchema
export const DayOfMonthScheduleSchema
export const TwiceMonthlyScheduleSchema
export const PaymentScheduleSchema
type DayOfWeekSchedule = z.infer<typeof DayOfWeekScheduleSchema>
type DayOfMonthSchedule = z.infer<typeof DayOfMonthScheduleSchema>
type TwiceMonthlySchedule = z.infer<typeof TwiceMonthlyScheduleSchema>
type PaymentSchedule = z.infer<typeof PaymentScheduleSchema>
export const FrequencySchema
type Frequency = z.infer<typeof FrequencySchema>
export function validateFrequencyScheduleMatch(frequency: Frequency, schedule: PaymentSchedule)
export const ProjectInputSchema
export const ProjectSchema
type ProjectInput = z.infer<typeof ProjectInputSchema>
type Project = z.infer<typeof ProjectSchema>
export const ExpenseTypeSchema
type ExpenseType = z.infer<typeof ExpenseTypeSchema>
export const FixedExpenseInputSchema
export const FixedExpenseSchema
type FixedExpenseInput = z.infer<typeof FixedExpenseInputSchema>
type FixedExpense = z.infer<typeof FixedExpenseSchema>
export const SingleShotExpenseInputSchema
export const SingleShotExpenseSchema
type SingleShotExpenseInput = z.infer<typeof SingleShotExpenseInputSchema>
type SingleShotExpense = z.infer<typeof SingleShotExpenseSchema>
export const ExpenseInputSchema
export const ExpenseSchema
type ExpenseInput = z.infer<typeof ExpenseInputSchema>
type Expense = z.infer<typeof ExpenseSchema>
export function isFixedExpense(expense: Expense)
export function isSingleShotExpense(expense: Expense)
export const CreditCardInputSchema
export const CreditCardSchema
type CreditCardInput = z.infer<typeof CreditCardInputSchema>
type CreditCard = z.infer<typeof CreditCardSchema>
export const ProjectionDaysSchema
type ProjectionDays = z.infer<typeof ProjectionDaysSchema>

export interface UserPreferences {
    property projectionDays: ProjectionDays
}
</file>

<file path="src/types/loading.ts">
type LoadingPhase = 'idle' | 'loading' | 'success' | 'error' | 'timeout'

export interface LoadingConfig {
    property minDisplayTime: number
    property timeoutThreshold: number
    property enableDevLogging: boolean
}

export interface CoordinatedLoadingState {
    property phase: LoadingPhase
    property showSkeleton: boolean
    property showError: boolean
    property errorMessage: string | null
    property loadingStartTime: number | null
    property retry: () => void
}

export interface SkeletonWrapperProps {
    property isLoading: boolean
    property error: Error | null
    property onRetry: () => void
    property skeleton: React.ReactNode
    property children: React.ReactNode
    property config: LoadingConfig
}

export interface PageSkeletonProps {
    property className: string
}

export interface SkeletonCardProps {
    property width: string
    property height: string
    property shimmer: boolean
    property className: string
}

export interface SkeletonLineProps {
    property width: string
    property height: string
    property className: string
}

export interface LoadingErrorState {
    property type: 'network' | 'timeout' | 'api' | 'unknown'
    property message: string
    property canRetry: boolean
    property originalError: Error
}
export const ERROR_MESSAGES
</file>

<file path="src/types/theme.ts">
import 'zod'
type ThemeValue = 'light' | 'dark' | 'system'
type ResolvedTheme = 'light' | 'dark'

export interface ThemeState {
    property theme: ThemeValue
    property resolvedTheme: ResolvedTheme
    property isLoaded: boolean
    property setTheme: (theme: ThemeValue) => void
}

export interface UserPreference {
    property id: string
    property userId: string
    property key: string
    property value: string
    property createdAt: Date
    property updatedAt: Date
}

export interface UserPreferenceRow {
    property id: string
    property user_id: string
    property key: string
    property value: string
    property created_at: string
    property updated_at: string
}
export const themeValueSchema
export const preferenceKeySchema
export const preferenceValueSchema
export const upsertPreferenceSchema
</file>

<file path="supabase/functions/before-user-created/index.ts">
import 'https://esm.sh/standardwebhooks@1.0.0'
import 'https://esm.sh/@supabase/supabase-js@2.86.0'
</file>

<file path="tailwind.config.ts">
import 'tailwindcss'
</file>

<file path="vite.config.ts">
import 'vite'
import '@vitejs/plugin-react'
import '@tailwindcss/vite'
import 'node:url'
</file>

<file path="vitest.config.ts">
import 'vitest/config'
import '@vitejs/plugin-react'
import 'node:url'
</file>
